<% if controller_name == 'commodities' && action_name == 'show' || controller_name == 'headings' && action_name == 'show' && @heading.declarable? %>
  <header>
    <a class="back-to-previous" href="<%= @back_path %>">Back <span class="visuallyhidden"> to the list of commodities</span></a>
    <h1 class="heading-large">Commodity information for <%= (@commodity || @heading).code %></h1>
    <%= form_tag perform_search_path, method: :get, class: "tariff-search #{@section_css}", id: "new_search" do |f| %>
      <div class="grid-row">
        <div class="column-full">
          <div class="search-header">
            <div class="searchfield form-group">
              <fieldset class="js-date-picker date-picker font-xsmall form-group inline">
                <span class="fields">This tariff is for
                  <label class="visuallyhidden" for="tariff_date_day">Day</label>
                  <%= select_day(@search.date, {}, { id: 'tariff_date_day', name: 'day' }) %>
                  <label class="visuallyhidden" for="tariff_date_month">Month</label>
                  <%= select_month(@search.date, {}, { id: 'tariff_date_month', name: 'month' }) %>
                  <label class="visuallyhidden" for="tariff_date_year">Year</label>
                  <%= select_year(@search.date, {end_year: 2008, start_year: Date.current.year + 1 }, { id: 'tariff_date_year', name: 'year' }) %>&emsp;
                  <a class="submit" role="button" href="#set-date" title="set date" rel="nofollow">Set date</a>&emsp;
                </span>
                <span class="text <%= @section_css %>">
                  This tariff is for <%= @search.date.to_formatted_s(:long) %>&emsp;
                  <a href="#change-date" title="change date" rel="nofollow">Change date</a>&emsp;
                </span>
              </fieldset>

              <% unless TradeTariffFrontend.production_domain?(request.host) %>
                <fieldset class="js-currency-picker font-xsmall form-group inline">
                <span class="fields">
                  <select id="tariff_currency" name="currency">
                    <%= options_for_select([['Euro', 'EUR'], ['British Pound', 'GBP']], @search.currency) %>
                  </select>&emsp;
                  <a class="submit" role="button" href="#set-currency" title="set currency" rel="nofollow">Set currency</a>
                </span>
                  <span class="text <%= @section_css %>">
                  In <%= @search.currency_name %>&emsp;
                    <a href="#change-currency" title="change currency" rel="nofollow">Change currency</a>
                </span>
                </fieldset>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </header>
<% else %>
  <header>
    <h1 class="heading-large"><a href="<%= sections_path %>">Trade Tariff: look up commodity codes, duty and VAT rates</a></h1>
  </header>
  <%= form_tag perform_search_path, method: :get, class: "tariff-search #{@section_css}", id: "new_search" do |f| %>
    <div class="grid-row">
      <div class="column-two-thirds">
        <div class="search-header js-search-header">
          <div class="searchfield form-group">
            <fieldset class="search-input">
              <%= label_tag :q, "Search the tariff", class: 'form-label' %>
              <%= select_tag :q, options_for_select([@search.q ]), name: 'q', class: 'js-commodity-picker-select form-control' %>
            </fieldset>
            <fieldset class="search-submit">
              <input class="button" type="submit" name="new_search" value="Search">
            </fieldset>
          </div>

          <fieldset class="js-date-picker date-picker font-xsmall form-group inline">
            <span class="fields">This tariff is for
              <label class="visuallyhidden" for="tariff_date_day">Day</label>
              <%= select_day(@search.date, {}, { id: 'tariff_date_day', name: 'day' }) %>
              <label class="visuallyhidden" for="tariff_date_month">Month</label>
              <%= select_month(@search.date, {}, { id: 'tariff_date_month', name: 'month' }) %>
              <label class="visuallyhidden" for="tariff_date_year">Year</label>
              <%= select_year(@search.date, {end_year: 2008, start_year: Date.current.year + 1 }, { id: 'tariff_date_year', name: 'year' }) %>&emsp;
              <a class="submit change-date-link" role="button" href="#set-date" title="set date" rel="nofollow">Set date</a>&emsp;
            </span>
            <span class="text <%= @section_css %>">
              This tariff is for <%= @search.date.to_formatted_s(:long) %>&emsp;
              <a href="#change-date" class="change-date-link" title="change date" rel="nofollow">Change date</a>&emsp;
            </span>
            <span class="fields">In

            </span>
          </fieldset>

          <% unless TradeTariffFrontend.production_domain?(request.host) %>
            <fieldset class="js-currency-picker font-xsmall form-group inline">
                <span class="fields">
                  <select id="tariff_currency" name="currency">
                    <%= options_for_select([['Euro', 'EUR'], ['British Pound', 'GBP']], @search.currency) %>
                  </select>&emsp;
                  <a class="submit" role="button" href="#set-currency" title="set currency" rel="nofollow">Set currency</a>
                </span>
              <span class="text <%= @section_css %>">
                  In <%= @search.currency_name %>&emsp;
                <a href="#change-currency" title="change currency" rel="nofollow">Change currency</a>
                </span>
            </fieldset>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
